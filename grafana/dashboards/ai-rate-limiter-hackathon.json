{
    "id": null,
    "title": "üèÜ AI Rate Limiter - Tier-by-Tier Demo",
    "tags": [
        "ai",
        "rate-limiting",
        "hackathon",
        "tier-demo"
    ],
    "timezone": "browser",
    "refresh": "1s",
    "time": {
        "from": "now-3m",
        "to": "now"
    },
    "schemaVersion": 30,
    "version": 1,
    "editable": true,
    "panels": [
        {
            "id": 1,
            "title": "üÜì FREE TIER: AI vs Static",
            "description": "AI scales 5‚Üí25+ RPS; static stuck at 5. Red = avoided static 429s.",
            "type": "timeseries",
            "gridPos": {
                "h": 8,
                "w": 8,
                "x": 0,
                "y": 0
            },
            "targets": [
                {
                    "expr": "rl_real_time_rps{tenant=\"free\"}",
                    "legendFormat": "üìà Free Traffic"
                },
                {
                    "expr": "rl_policy_rps{tenant=\"free\"}",
                    "legendFormat": "ü§ñ AI Limit"
                },
                {
                    "expr": "5",
                    "legendFormat": "üîí Static 5"
                },
                {
                    "expr": "increase(rl_blocked_requests_total{tenant=\"free\"}[30s])/30",
                    "legendFormat": "‚ùå AI 429/s"
                },
                {
                    "expr": "clamp_min(rl_real_time_rps{tenant=\"free\"} - 5, 0)",
                    "legendFormat": "üí• Static 429/s (would)"
                },
                {
                    "expr": "clamp_min(clamp_min(rl_real_time_rps{tenant=\"free\"} - 5,0) - increase(rl_blocked_requests_total{tenant=\"free\"}[30s])/30, 0)",
                    "legendFormat": "üü¢ Avoided 429/s"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "reqps",
                    "min": 0,
                    "max": 50,
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üìà Free Traffic"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#FCD34D"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 4
                            },
                            {
                                "id": "custom.fillOpacity",
                                "value": 15
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "ü§ñ AI Limit"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#10B981"
                                }
                            },
                            {
                                "id": "custom.lineStyle",
                                "value": {
                                    "dash": [
                                        10,
                                        5
                                    ]
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üîí Static 5"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#8B5CF6"
                                }
                            },
                            {
                                "id": "custom.lineStyle",
                                "value": {
                                    "dash": [
                                        5,
                                        5
                                    ]
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "‚ùå AI 429/s"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#EF4444"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 2
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üí• Static 429/s (would)"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#DC2626"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            },
                            {
                                "id": "custom.fillOpacity",
                                "value": 25
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üü¢ Avoided 429/s"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#22C55E"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            },
                            {
                                "id": "custom.fillOpacity",
                                "value": 10
                            }
                        ]
                    }
                ]
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "bottom",
                    "calcs": [
                        "lastNotNull",
                        "max"
                    ],
                    "values": [
                        "lastNotNull",
                        "max"
                    ]
                }
            }
        },
        {
            "id": 2,
            "title": "üíº PRO TIER: AI vs Static",
            "description": "AI scales 10‚Üí60+ RPS; static stuck at 10.",
            "type": "timeseries",
            "gridPos": {
                "h": 8,
                "w": 8,
                "x": 8,
                "y": 0
            },
            "targets": [
                {
                    "expr": "rl_real_time_rps{tenant=\"pro\"}",
                    "legendFormat": "üìä Pro Traffic"
                },
                {
                    "expr": "rl_policy_rps{tenant=\"pro\"}",
                    "legendFormat": "ü§ñ AI Limit"
                },
                {
                    "expr": "10",
                    "legendFormat": "üîí Static 10"
                },
                {
                    "expr": "increase(rl_blocked_requests_total{tenant=\"pro\"}[30s])/30",
                    "legendFormat": "‚ùå AI 429/s"
                },
                {
                    "expr": "clamp_min(rl_real_time_rps{tenant=\"pro\"} - 10, 0)",
                    "legendFormat": "üí• Static 429/s (would)"
                },
                {
                    "expr": "clamp_min(clamp_min(rl_real_time_rps{tenant=\"pro\"} - 10,0) - increase(rl_blocked_requests_total{tenant=\"pro\"}[30s])/30, 0)",
                    "legendFormat": "üü¢ Avoided 429/s"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "reqps",
                    "min": 0,
                    "max": 80,
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üìä Pro Traffic"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#F97316"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 4
                            },
                            {
                                "id": "custom.fillOpacity",
                                "value": 15
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "ü§ñ AI Limit"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#059669"
                                }
                            },
                            {
                                "id": "custom.lineStyle",
                                "value": {
                                    "dash": [
                                        10,
                                        5
                                    ]
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üîí Static 10"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#7C3AED"
                                }
                            },
                            {
                                "id": "custom.lineStyle",
                                "value": {
                                    "dash": [
                                        5,
                                        5
                                    ]
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "‚ùå AI 429/s"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#EF4444"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 2
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üí• Static 429/s (would)"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#B91C1C"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            },
                            {
                                "id": "custom.fillOpacity",
                                "value": 25
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üü¢ Avoided 429/s"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#16A34A"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            },
                            {
                                "id": "custom.fillOpacity",
                                "value": 10
                            }
                        ]
                    }
                ]
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "bottom",
                    "calcs": [
                        "lastNotNull",
                        "max"
                    ],
                    "values": [
                        "lastNotNull",
                        "max"
                    ]
                }
            }
        },
        {
            "id": 3,
            "title": "üèÜ ENT TIER: AI vs Static",
            "description": "AI scales 15‚Üí120+ RPS under governance; static stuck at 15.",
            "type": "timeseries",
            "gridPos": {
                "h": 8,
                "w": 8,
                "x": 16,
                "y": 0
            },
            "targets": [
                {
                    "expr": "rl_real_time_rps{tenant=\"ent\"}",
                    "legendFormat": "üöÄ Ent Traffic"
                },
                {
                    "expr": "rl_policy_rps{tenant=\"ent\"}",
                    "legendFormat": "ü§ñ AI Limit"
                },
                {
                    "expr": "15",
                    "legendFormat": "üîí Static 15"
                },
                {
                    "expr": "increase(rl_blocked_requests_total{tenant=\"ent\"}[30s])/30",
                    "legendFormat": "‚ùå AI 429/s"
                },
                {
                    "expr": "clamp_min(rl_real_time_rps{tenant=\"ent\"} - 15, 0)",
                    "legendFormat": "üí• Static 429/s (would)"
                },
                {
                    "expr": "clamp_min(clamp_min(rl_real_time_rps{tenant=\"ent\"} - 15,0) - increase(rl_blocked_requests_total{tenant=\"ent\"}[30s])/30, 0)",
                    "legendFormat": "üü¢ Avoided 429/s"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "reqps",
                    "min": 0,
                    "max": 150,
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üöÄ Ent Traffic"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#06B6D4"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 4
                            },
                            {
                                "id": "custom.fillOpacity",
                                "value": 15
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "ü§ñ AI Limit"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#047857"
                                }
                            },
                            {
                                "id": "custom.lineStyle",
                                "value": {
                                    "dash": [
                                        10,
                                        5
                                    ]
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üîí Static 15"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#6D28D9"
                                }
                            },
                            {
                                "id": "custom.lineStyle",
                                "value": {
                                    "dash": [
                                        5,
                                        5
                                    ]
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "‚ùå AI 429/s"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#EF4444"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 2
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üí• Static 429/s (would)"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#991B1B"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            },
                            {
                                "id": "custom.fillOpacity",
                                "value": 30
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üü¢ Avoided 429/s"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#15803D"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            },
                            {
                                "id": "custom.fillOpacity",
                                "value": 10
                            }
                        ]
                    }
                ]
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "bottom",
                    "calcs": [
                        "lastNotNull",
                        "max"
                    ],
                    "values": [
                        "lastNotNull",
                        "max"
                    ]
                }
            }
        },
    {
            "id": 5,
            "title": "üß† AI CONFIDENCE",
            "description": "AI confidence (target >85%).",
            "type": "gauge",
            "gridPos": {
                "h": 8,
                "w": 8,
        "x": 0,
        "y": 8
            },
            "targets": [
                {
                    "expr": "avg(rl_ai_confidence_score)",
                    "legendFormat": "Confidence"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "min": 0,
                    "max": 1,
                    "unit": "percentunit",
                    "thresholds": {
                        "steps": [
                            {
                                "color": "#DC2626",
                                "value": 0
                            },
                            {
                                "color": "#FFBE0B",
                                "value": 0.7
                            },
                            {
                                "color": "#10B981",
                                "value": 0.85
                            }
                        ]
                    }
                }
            },
            "options": {
                "showThresholdLabels": true,
                "showThresholdMarkers": true
            }
        },
    {
            "id": 6,
            "title": "üåä SURGE RISK & PREEMPTIVE SCALING",
            "description": "Surge probability next window. 50% pre-warm, 70% scale-up, 90% critical.",
            "type": "timeseries",
            "gridPos": {
                "h": 8,
                "w": 8,
        "x": 8,
        "y": 8
            },
            "targets": [
                {
                    "expr": "rl_surge_prediction{tenant=\"free\"}",
                    "legendFormat": "üÜì Free Risk"
                },
                {
                    "expr": "rl_surge_prediction{tenant=\"pro\"}",
                    "legendFormat": "üíº Pro Risk"
                },
                {
                    "expr": "rl_surge_prediction{tenant=\"ent\"}",
                    "legendFormat": "üèÜ Ent Risk"
                },
                {
                    "expr": "max(rl_surge_prediction)",
                    "legendFormat": "üî• Peak Risk"
                },
                {
                    "expr": "0.5",
                    "legendFormat": "‚ö†Ô∏è 50% Pre-warm"
                },
                {
                    "expr": "0.7",
                    "legendFormat": "üõ°Ô∏è 70% Scale-up"
                },
                {
                    "expr": "0.9",
                    "legendFormat": "üö® 90% Critical"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "min": 0,
                    "max": 1,
                    "unit": "percentunit",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 20
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üÜì Free Risk"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#FCD34D"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üíº Pro Risk"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#F97316"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üèÜ Ent Risk"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#06B6D4"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 3
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üî• Peak Risk"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#DC2626"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 4
                            },
                            {
                                "id": "custom.lineStyle",
                                "value": {
                                    "dash": [
                                        8,
                                        4
                                    ]
                                }
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "‚ö†Ô∏è 50% Pre-warm"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#f59e0b"
                                }
                            },
                            {
                                "id": "custom.lineStyle",
                                "value": {
                                    "dash": [
                                        4,
                                        4
                                    ]
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 2
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üõ°Ô∏è 70% Scale-up"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#dc2626"
                                }
                            },
                            {
                                "id": "custom.lineStyle",
                                "value": {
                                    "dash": [
                                        4,
                                        4
                                    ]
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 2
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üö® 90% Critical"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "fixed",
                                    "fixedColor": "#7f1d1d"
                                }
                            },
                            {
                                "id": "custom.lineStyle",
                                "value": {
                                    "dash": [
                                        2,
                                        6
                                    ]
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 2
                            }
                        ]
                    }
                ]
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "bottom",
                    "calcs": [
                        "lastNotNull",
                        "max"
                    ],
                    "values": [
                        "lastNotNull",
                        "max"
                    ]
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            }
        },
    {
            "id": 7,
            "title": "üü¢ AVOIDED 429s (Per Second)",
            "description": "Current rate of static 429s being avoided by AI adaptive scaling.",
            "type": "stat",
            "gridPos": {
                "h": 8,
                "w": 8,
        "x": 16,
        "y": 8
            },
            "targets": [
                {
                    "expr": "sum(clamp_min(rl_real_time_rps - vector(5), 0) * on(tenant) group_left() (rl_real_time_rps{tenant=\"free\"} * 0 + 1)) + sum(clamp_min(rl_real_time_rps - vector(10), 0) * on(tenant) group_left() (rl_real_time_rps{tenant=\"pro\"} * 0 + 1)) + sum(clamp_min(rl_real_time_rps - vector(15), 0) * on(tenant) group_left() (rl_real_time_rps{tenant=\"ent\"} * 0 + 1))",
                    "legendFormat": "TOTAL Avoided/sec"
                },
                {
                    "expr": "clamp_min(rl_real_time_rps{tenant=\"free\"} - 5, 0)",
                    "legendFormat": "Free Avoided/sec"
                },
                {
                    "expr": "clamp_min(rl_real_time_rps{tenant=\"pro\"} - 10, 0)",
                    "legendFormat": "Pro Avoided/sec"
                },
                {
                    "expr": "clamp_min(rl_real_time_rps{tenant=\"ent\"} - 15, 0)",
                    "legendFormat": "Ent Avoided/sec"
                }
            ],
            "fieldConfig": {
                "defaults": {
                    "unit": "reqps"
                },
                "overrides": [
                    {
                        "matcher": {"id": "byName", "options": "TOTAL Avoided"},
                        "properties": [
                            {"id": "color", "value": {"mode": "fixed", "fixedColor": "#22C55E"}},
                            {"id": "displayName", "value": "Total Saved"}
                        ]
                    },
                    {
                        "matcher": {"id": "byName", "options": "Free Avoided"},
                        "properties": [
                            {"id": "color", "value": {"mode": "fixed", "fixedColor": "#FCD34D"}}
                        ]
                    },
                    {
                        "matcher": {"id": "byName", "options": "Pro Avoided"},
                        "properties": [
                            {"id": "color", "value": {"mode": "fixed", "fixedColor": "#F97316"}}
                        ]
                    },
                    {
                        "matcher": {"id": "byName", "options": "Ent Avoided"},
                        "properties": [
                            {"id": "color", "value": {"mode": "fixed", "fixedColor": "#06B6D4"}}
                        ]
                    }
                ]
            },
            "options": {
                "colorMode": "value",
                "graphMode": "none",
                "justifyMode": "center",
                "orientation": "horizontal",
                "textMode": "value_and_name"
            }
    }
    ]
}